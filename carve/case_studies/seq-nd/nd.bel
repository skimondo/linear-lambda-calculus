%======================================================%
% Statics of linear natural deduction calculus
%======================================================%

% Bidirectional typing judgments:
% Î” âŠ¢ e âŸ¸ A, i.e., e checks against type A under Î”
% Î” âŠ¢ e âŸ¹ A, i.e., e synthesizes type A under Î”

LF syn : lctx _ â†’ obj â†’ tp â†’ type =

| coe :
    chk Î” e A
  â†’ syn Î” (coerce e A) A

% Hypotheses

| init :
    upd Î” _ X X A A ğŸ™ ğŸ˜ Î”' â†’ exh Î”'
  â†’ syn Î” X A

% Multiplicatives

| E-o :
    syn Î”â‚ s (A -o B)
  â†’ chk Î”â‚‚ e A
  â†’ merge Î”â‚ Î”â‚‚ Î”
  â†’ syn Î” (app s e) B

% Additives

| E&1 :
    syn Î” e (A & B)
  â†’ syn Î” (fst e) A

| E&2 :
    syn Î” e (A & B)
  â†’ syn Î” (snd e) B

and chk : lctx _ â†’ obj â†’ tp â†’ type =

| conv :
    syn Î” e A
  â†’ chk Î” e A

% Multiplicatives

| Iâ‘  :
    exh Î”
  â†’ chk Î” unit â‘ 

| Eâ‘  :
    syn Î”â‚ s â‘  â†’ chk Î”â‚‚ e C
  â†’ merge Î”â‚ Î”â‚‚ Î”
  â†’ chk Î” (elim-unit s e) C

| IâŠ— :
    chk Î”â‚ eâ‚ A â†’ chk Î”â‚‚ eâ‚‚ B
  â†’ merge Î”â‚ Î”â‚‚ Î”
  â†’ chk Î” (tuple eâ‚ eâ‚‚) (A âŠ— B)

| EâŠ— :
    syn Î”â‚ s (A âŠ— B)
  â†’ ({x:obj} {y:obj} chk (cons (cons Î”â‚‚ x A ğŸ™) y B ğŸ™) (e x y) C)
  â†’ merge Î”â‚ Î”â‚‚ Î”
  â†’ chk Î” (elim-tuple s e) C

| I-o :
    ({x:obj} chk (cons Î” x A ğŸ™) (m x) B)
  â†’ chk Î” (lam m) (A -o B)

% Additives

| I& :
    chk Î” eâ‚ A â†’ chk Î” eâ‚‚ B
  â†’ chk Î” (pair eâ‚ eâ‚‚) (A & B)

| IâŠ•1 :
    chk Î” e A
  â†’ chk Î” (inl e) (A âŠ• B)

| IâŠ•2 :
    chk Î” e B
  â†’ chk Î” (inr e) (A âŠ• B)

| EâŠ•:
    syn Î”â‚ s (A âŠ• B)
  â†’ ({x:obj} chk (cons Î”â‚‚ x A ğŸ™) (eâ‚ x) C)
  â†’ ({x:obj} chk (cons Î”â‚‚ x B ğŸ™) (eâ‚‚ x) C)
  â†’ merge Î”â‚ Î”â‚‚ Î”
  â†’ chk Î” (elim-sum s eâ‚ eâ‚‚) C;